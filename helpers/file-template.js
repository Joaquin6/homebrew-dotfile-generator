var _ = require('lodash');

module.exports = function(files, installAppDir) {

  var text = "";

  text += "# Generated by cask-dotfile-generator\n";
  text += "# https://github.com/seethroughtrees/brew-cask-dotfile-generator\n\n\n";

  text += "# Make sure we\'re using the latest Homebrew\n";
  text += "brew update\n\n";
  text += "# Upgrade any already-installed formulae\n";
  text += "brew upgrade\n\n";
  text += "# Install native apps\n";
  text += "brew tap phinze/homebrew-cask\n";
  text += "brew install brew-cask\n\n";
  text += "function installcask() {\n";

  if (installAppDir === true) {
    text += "  brew cask install --appdir=\"/Applications\" \"${@}\" 2> /dev/null\n";
  } else {
    text += "  brew cask install \"${@}\" 2> /dev/null\n";
  }

  text += "}\n\n";

  _.forEach(files, function(val, i) {
    text += "installcask " + val + "\n";
  });

  text += "\n# Remove outdated versions from the cellar\n";
  text += "brew cleanup\n";

  return text;

};
